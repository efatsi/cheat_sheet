######################################

ROOT REDIRECT

ga, gc 'app initialized', git rm public/index.html

in config/routes.rb

  match 'home' => 'home#home', :as => :home
	# Change root path
	root :to => 'home#home'
	
rake routes

import home folder and home_controller.rb

######################################

BOOTSTRAP

rails generate bootstrap:install
copy bootstrap_and_overrides code in

######################################

ARBEIT BAR

import maroon.png into app/assets/images

<body>
	<%= link_to(image_tag('maroon.png'), home_path) %>
	<div id="wrapper">
		<!-- NAV BAR -->
		<div class="navbar">
		  <div class="navbar-inner">
		    <div class="container">
		      <a class="btn btn-navbar" data-toggle="collapse" data-target=".collapse">
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		      </a>
		      <div class="nav-collapse">
		        <ul class="nav">
		          <li><%= link_to "Home", home_path %></li>
		        </ul>	
		        
						<% if logged_in? %>
							<p class="ident pull-right">
								Welcome, <%= link_to current_user.proper_name, user_path(current_user) %> | 
								<%= link_to "Logout", logout_path %>
							</p>
						<% else %>
							<%= link_to 'Login', login_path %>
						<% end %>
								        					
		      </div>
		    </div>
		  </div>
		</div>

		<!-- MAIN CONTENT -->
		<div class="container">
			<!-- flash messages -->
			<% flash.each do |name, msg| %>
				<div class="alert alert-<%= name == :notice ? "success" : "error" %>">
					<a class="close" data-dismiss="alert">&times;</a>
					<%= msg %>
				</div>
	    <% end %>
			<div class="row">
				<!-- main content placed here -->
				<div class="span12">
					<%= yield %>
				</div>
			</div>
		</div>
	</div>
</body>

######################################

CREAMERY NAV BAR

in views/layouts/application.html.erb

<!-- NAV BAR HERE -->
	<div class="navbar navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container">
			  <a class="btn btn-navbar" data-toggle="collapse" data-target=".collapse">
			    <span class="icon-bar"></span>
			    <span class="icon-bar"></span>
			    <span class="icon-bar"></span>
			  </a>
			  <a class="brand">HOME</a>
			  <div class="nav-collapse">
			    <ul class="nav">
		      	<li><%= link_to "Home", home_path %></li>
			    </ul>
			  </div>
			</div>
		</div>
	</div>

	<!-- MAIN CONTENT -->
	<div class="container">
		<!-- flash messages -->
		<% flash.each do |name, msg| %>
			<div class="alert alert-<%= name == :notice ? "success" : "error" %>">
				<a class="close" data-dismiss="alert">&times;</a>
				<%= msg %>
			</div>
    <% end %>
		<div class="row">
			<!-- main content placed here -->
			<div class="span12">
				<%= yield %>
			</div>
		</div>
	</div>
	
######################################

FLASH NOTICES

in views/layouts/application.html.erb
    <% flash.each do |name, msg| %>
      <%= content_tag :div, msg, :id => "flash_#{name}" %>
    <% end %>
    
OR PROBABLY

		<% flash.each do |name, msg| %>
			<div class="alert alert-<%= name == :notice ? "success" : "error" %>">
				<a class="close" data-dismiss="alert">&times;</a>
				<%= msg %>
			</div>
    <% end %>

    
WITH FADE

in app/assets/javascripts/application.js
// Flash fade
	$(function() {
	   $('.alert-success').fadeIn('normal', function() {
	      $(this).delay(3700).fadeOut();
	   });
	});
	
	$(function() {
	   $('.alert-error').fadeIn('normal', function() {
	      $(this).delay(3700).fadeOut();
	   });
	});
    

######################################

PAGINATE

in controller
	@products = Product.paginate(:page => params[:page], :per_page => 10)

in view
	<%= will_paginate @products %>


######################################

PAGINATE & SEARCH

in model
	def self.search(search, page)
  	paginate :per_page => 8, :page => page, :conditions => ['first_name || last_name like ?', "%#{search}%"], :order => 'last_name, first_name'
	end

in controller	
	def index
		@products = Product.search(params[:search], params[:page])
	end

in view
	<%= form_tag products_path, :method => 'get' do %>
		<p>
			<%= text_field_tag :search, params[:search] %>
			<%= submit_tag "Search", :name => nil %>
		</p>
	<% end %>
	
	<%= will_paginate @products %>


######################################

AUTHENTICATION

rgm user first_name:string last_name:string email:string role:string password_digest:string OTHER_id:integer
rdm

in models/user.rb
has_secure_password
attr_accessible :email, :password, :password_confirmation, :first_name, :last_name, :role, :OTHER_id

  def proper_name
    "#{first_name} #{last_name}"
  end
	
	def self.authenticate(email, password)
		find_by_email(email).try(:authenticate, password)
	end
		
	def self.find_by_email(email)
		where(:email => email).first
	end
	
  ROLES = [['Employee', 'employee'],['Manager', 'manager'],['Administrator', 'admin']]
	
in controllers/application_controller.rb
  private
  def current_user
  	@current_user ||= User.find(session[:user_id]) if session[:user_id]
  end
  helper_method :current_user
  
  def logged_in?
  	current_user
  end
  helper_method :logged_in?
  
  def check_login
  	redirect_to login_url, alert: "You need to log in to view this page." if current_user.nil?
  end
  helper_method :check_login
  
  ### Only to be used with CanCan ###
#  rescue_from CanCan::AccessDenied do |exception|
#  	flash[:error] = "You shall not pass!"
#  	redirect_to root_url
#  end
  
in any controllers you want
  before_filter :check_login, :except => [:index, :show]

import sessions_controller.rb
import user_controller.rb
import user folder (views)

add the following routes to config/routes.rb
	resources :users
	resources :sessions
	match 'user/edit' => 'users#edit', :as => :edit_current_user
	match 'signup' => 'users#new', :as => :signup
	match 'logout' => 'sessions#destroy', :as => :logout
	match 'login' => 'sessions#new', :as => :login

#### can add the arbeit nav bar login code back in ####


######################################

CANCAN

rg cancan:ability
import ability.rb

in models/user.rb
	def role?(authorized_role)
		return false if role.nil?
		role.to_sym == authorized_role
	end
	
to controllers
	load_and_authorize_resource
	
uncomment CanCan rescue method in controllers/application_controller.rb


######################################

POLYMORPHISMS


######################################

PHOTO UPLOADER


######################################

MAILER


######################################


